<h3>All patients</h3>

<div data-role="preloader" data-type="cycle" data-style="color" ng-init="patients.getAll()"
     ng-hide="patients.patients.length"></div>

<table class="dataTable border bordered" data-auto-width="false" ng-show="patients.patients.length">
  <thead>
  <tr>
    <td class="sortable-column" style="width: 100px"
        ng-class="{'sort-asc': patients.sortType === 'medicare_no',
                           'sort-desc': patients.sortType === '-medicare_no'}"
        ng-click="patients.sortType = patients.sortType === 'medicare_no'? '-'+patients.sortType: 'medicare_no'">
      Medicare #
    </td>
    <td class="sortable-column"
        ng-class="{'sort-asc': patients.sortType === 'contact.first_name',
                           'sort-desc': patients.sortType === '-contact.first_name'}"
        ng-click="patients.sortType = patients.sortType === 'contact.first_name'? '-'+patients.sortType: 'contact.first_name'">
      First name
    </td>
    <td class="sortable-column"
        ng-class="{'sort-asc': patients.sortType === 'gp.last_name',
                           'sort-desc': patients.sortType === '-gp.last_name'}"
        ng-click="patients.sortType = patients.sortType === 'gp.last_name'? '-'+patients.sortType: 'gp.last_name'">
      GP
    </td>
    <td class="sortable-column" style="width: 150px"
        ng-class="{'sort-asc': patients.sortType === 'last_visit',
                           'sort-desc': patients.sortType === '-last_visit'}"
        ng-click="patients.sortType = patients.sortType === 'last_visit'? '-'+patients.sortType: 'last_visit'">
      Last visit
    </td>
  </tr>
  </thead>

  <tbody>
  <tr
    ng-repeat="patient in patients.patients | orderBy:patients.sortType | filter:patients.searchText">
    <td><a ui-sref="subpatient.patient({medicareNo: patient.medicare_no})">{{ patient.medicare_no }}</a></td>
    <td>{{ patient.contact.first_name }}</td>
    <td>Dr {{ patient.gp.first_name }} {{ patient.gp.last_name }}</td>
    <td am-time-ago="patient.createdAt"></td>
  </tr>
  </tbody>
</table>
